<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Sistema solar</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>

<body>
<script>
let xS, yS, dS, rS, vS;
let xL, yL, dL, rL, vL;
let dia, mes, anio;
let xP, yP;
let S, vP;
let groundY, vY, jumpV, g;
let rHead, bodyL, armL, legL;
let hipY, shoulderY, headY;

function setup() {
    createCanvas(800, 800);

    dS = min(width, height) * 0.2;
    rS = dS / 2;
    yS = height / 4;
    xS = -rS;
    vS = width / 400;

    dL = dS * 0.5;
    rL = dL / 2;
    xL = -width - rL;
    yL = height / 3;
    vL = vS;

    dia = 1;
    mes = 1;
    anio = 2025;

    groundY = 0.8 * height;

    S = 0.12 * min(width, height);
    xP = 0.25 * width;
    yP = groundY;

    vP = width / 150;
    vY = 0;
    jumpV = -0.03 * height;
    g = 0.0016 * height;

    rHead = 0.2 * S;
    bodyL = 0.6 * S;
    armL = 0.45 * S;
    legL = 0.55 * S;
}

function draw() {
    background(xL >= 0 ? 10 : color(0, 0, 255));

    // Suelo
    noStroke();
    fill(20, 120, 40);
    rect(0, groundY, width, height - groundY);

    // Sol y luna
    fill(245, 234, 10);
    circle(xS, yS, dS);

    fill(200);
    circle(xL, yL, dL);

    xS += vS;
    xL += vL;

    if (xS >= 2 * width - rS) {
        xS = -rS;
        xL = -width - rL;
        dia++;
        if (dia > 30) { dia = 1; mes++; }
        if (mes > 12) { mes = 1; anio++; }
    }

    // Movimiento horizontal
    if (keyIsDown(LEFT_ARROW)) xP -= vP;
    if (keyIsDown(RIGHT_ARROW)) xP += vP;
    xP = constrain(xP, 0, width);

    // Salto
    yP += vY;
    vY += g;

    if (yP > groundY) {
        yP = groundY;
        vY = 0;
    }

    // Recalcular cuerpo
    hipY = yP - legL;
    shoulderY = hipY - bodyL;
    headY = shoulderY - rHead;

    // Fecha
    fill(255);
    textSize(20);
    text("Fecha: (" + dia + ") (" + mes + ") (" + anio + ")", 10, 25);

    // Mu√±eco
    stroke(255);
    strokeWeight(0.06 * S);
    noFill();

    circle(xP, headY, 2 * rHead);
    line(xP, shoulderY, xP, hipY);

    line(xP - 0.25 * S, shoulderY, xP + 0.25 * S, shoulderY);
    line(xP - 0.25 * S, shoulderY, xP - 0.25 * S, shoulderY + armL);
    line(xP + 0.25 * S, shoulderY, xP + 0.25 * S, shoulderY + armL);

    line(xP, hipY, xP - 0.18 * S, yP);
    line(xP, hipY, xP + 0.18 * S, yP);
}

function keyPressed() {
    if (keyCode === UP_ARROW && vY === 0) {
        vY = jumpV;
    }
}

</script>
</body>
</html>